{"hash":"5fc522a57be761dc6f299e6499675b3c26e950ab","data":{"author":{"id":"Julia","title":"Julia","path":"/author/Julia/","belongsTo":{"totalCount":10,"pageInfo":{"totalPages":2,"currentPage":1},"edges":[{"node":{"id":"c854d4a554f3e6aa74a421fac8beb243","title":"Konfiguracja ClusterSettings w MongoDB Java Driver","datetime":"2021-10-07 20:22:24","path":"/konfiguracja-cluster-settings-w-mongo-db-java-driver/","cover":"/images/posts/cluster-settings-mongo/local-threshold.png","content":"<p>Powszechnie wykorzystywane klienty do łączenia się z bazą danych dostarczają wiele funkcjonalności i możliwości konfiguracji, które można przeoczyć - a są bardzo przydatne i mogą zoptymalizować działanie usługi. Warto poznać parę przydatnych settingsów, które potencjalnie można przetestować.</p>\n<h3 id=\"czym-są-drivery\">Czym są drivery?</h3>\n<p>Drivery działają z reguły w taki sposób, że zarządzają połączeniami otwieranymi do bazy danych, dostarczając przydatne funkcje i logikę - na przykład ograniczeniem puli połączeń czy eliminacji gorzej działających hostów. Owrapowują całą logikę w przyjazny interfejs api, odciążając programistę od rozumienia internali Takich rzeczy raczej nie opłaca się implementować samemu od zera, ale nie oznacza to że jest to niewykonalne. Są różne drivery i można nawet do nich kontrybuować, bo w większości przypadków są open-source.</p>\n<h3 id=\"clustersettings\">ClusterSettings</h3>\n<p>Klaster to grupa hostów mongo, które udostępniają razem pewien zbiór danych, składa się z shardów (opcjonalnie), config serverów i replica setów. Ustawienia dotyczące klastra można skonfigurować za pomocą klasy <code>ClusterSettings</code>, która zawiera takie modyfikowalne elementy jak lista hostów, do których chcemy się łączyć, nazwa replicasetu, różne polityki wybierania hostów, którego wykorzystamy do wysłania zapytania do bazy.</p>\n<h3 id=\"localthreshold\">localThreshold</h3>\n<p>Umożliwia sterownikowi wybrać hosty, które mają najszybszy czas odpowiedzi i są na maszynach fizycznych w najbliższej możliwej lokalizacji - na przykład w ramach jednego datacenter. Parametr <code>localTreshold</code> to próg czasu, który zaczyna być odliczany od momentu uzyskania najszybszej odpowiedzi z serwera mongo. Wszystkie hosty, które odpowiedzą w zadanym okresie (ping najszybszego serwera + czas local threshold) zostaną zakwalifikowane do wykonywania żądań do bazy. Najlepiej obrazuje to rysunek:</p>\n<p><img src=\"/images/posts/cluster-settings-mongo/local-threshold.png\" alt=\"Wizualizacja Local Threshold\" title=\"Wizualizacja Local Threshold\"></p>\n<p>Przykładowo: istnieją 3 serwery mongod, które odpowiadają w czasie <code>5ms</code>, <code>9ms</code> i <code>27ms</code>. Ustawiono na sterowniku <code>localThreshold=20ms</code>. Jako że najszybszy czas odpowiedzi to 5ms, a jeszcze do niego należy doliczyć zdefiniowany threshold czyli <code>20ms</code>, to łącznie maksymalny czas odpowiedzi wyniesie <code>25ms</code>. Serwer odpowiadający w czasie 9ms zakwalifikuje się do serwowania danych, natomiast serwer któremu odpowiedź zajęła <code>27ms</code> zostaje odrzucony - ponieważ akceptowano czas maksymalny <code>25ms</code>. </p>\n<p>Jeśli zostanie utracona łączność z serwerem, który wcześniej odpowiadał w <code>5ms</code>, a zostaną nam dwa serwery z <code>9ms</code> i <code>27ms</code>, to wybierzemy oba, ponieważ local threshold się przesunął (<code>9ms + 20ms = 29ms</code>).</p>\n<p>Na dopasowanie tego parametru nie ma uniwersalnego wzoru i trzeba go skonfigurować zgodnie z realnymi czasami z własnych dc, przydatne mogą być w tym celu metryki czasów odpowiedzi. Raczej nie ma większego powodu, by w normalnym trybie działania aplikacji odpytywać nie-lokalne datacenter, a sam <code>localThreshold</code> jest na tyle elastyczny, że może się przesuwać podczas awarii jednej serwerowni i nie odetnie usługi od bazy danych tylko przekieruje do innego datacenter. </p>\n<p>Domyślnie wartość ta przyjmuje <code>15ms</code> w sterowniku javowym, więc raczej nie ma co się niepokoić że aktualnie ruch krąży między dc - chyba że datacenters mają bardzo szybkie czasy odpowiedzi między sobą.</p>\n<p>Przykładowa konfiguracja:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #8FBCBB\">MongoClient</span><span style=\"color: #D8DEE9FF\"> mongoClient </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">MongoClients</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">create</span><span style=\"color: #ECEFF4\">(</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #8FBCBB\">MongoClientSettings</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">builder</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">                        .</span><span style=\"color: #88C0D0\">applyToClusterSettings</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">builder </span><span style=\"color: #81A1C1\">-&gt;</span>\n<span style=\"color: #D8DEE9FF\">                                builder</span>\n<span style=\"color: #D8DEE9FF\">                                        .</span><span style=\"color: #88C0D0\">hosts</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #8FBCBB\">Collections</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">singletonList</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">ServerAddress</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">mongos.somedomain.local</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\">, </span><span style=\"color: #B48EAD\">27017</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #ECEFF4\">))</span>\n<span style=\"color: #D8DEE9FF\">                                        .</span><span style=\"color: #88C0D0\">localThreshold</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #B48EAD\">50</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">TimeUnit</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #D8DEE9\">MILLISECONDS</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">                        </span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">                        .</span><span style=\"color: #88C0D0\">build</span><span style=\"color: #ECEFF4\">())</span></code></pre>\n<h3 id=\"serverselectiontimeout\">serverSelectionTimeout</h3>\n<p>Podobnie jak localThreshold, umożliwia sterownikowi odseparowanie hostów z najgorszymi czasami odpowiedzi. Tym razem to jest maksymalny czas, po którym przestaniemy uwzględniać tego hosta. Może być przydatny w momencie, gdy wszystkie hosty będą przeciążone i nie warto już dociążać ich bardziej.</p>\n<p>Przykładowo, wszystkie hosty są obciążone i mają ping <code>470ms</code>, <code>490ms</code>, <code>550ms</code>. Przy <code>serverSelectionTimeout=500ms</code> odrzucimy hosta który odpowiedział sumarycznie w czasie <code>550ms</code>.</p>\n<p>Domyślnie przyjmuje wartość <code>30s</code>.</p>\n<p>Przykładowa konfiguracja:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #8FBCBB\">MongoClient</span><span style=\"color: #D8DEE9FF\"> mongoClient </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">MongoClients</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">create</span><span style=\"color: #ECEFF4\">(</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #8FBCBB\">MongoClientSettings</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">builder</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">                        .</span><span style=\"color: #88C0D0\">applyToClusterSettings</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">builder </span><span style=\"color: #81A1C1\">-&gt;</span>\n<span style=\"color: #D8DEE9FF\">                                builder</span>\n<span style=\"color: #D8DEE9FF\">                                        .</span><span style=\"color: #88C0D0\">hosts</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #8FBCBB\">Collections</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">singletonList</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">ServerAddress</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">mongos.somedomain.local</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\">, </span><span style=\"color: #B48EAD\">27017</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #ECEFF4\">))</span>\n<span style=\"color: #D8DEE9FF\">                              .</span><span style=\"color: #88C0D0\">serverSelectionTimeout</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #B48EAD\">500</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">TimeUnit</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #D8DEE9\">MILLISECONDS</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">                        </span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">                        .</span><span style=\"color: #88C0D0\">build</span><span style=\"color: #ECEFF4\">())</span><span style=\"color: #81A1C1\">;</span></code></pre>\n<h3 id=\"requiredreplicasetname\">requiredReplicaSetName</h3>\n<p>Nazwa replicasetu, z którym aplikacja ma się połączyć. Przydatne, jeśli istnieje wiele replicasetów na jednym klastrze. </p>\n<h3 id=\"clusterlistener\">clusterListener</h3>\n<p>Listener, dzięki któremu można nasłuchiwać na zdarzenia związane z klastrem - połączenie, zmianę, zamknięcie połączenia. Przydatne przy zbieraniu metryk, debugowaniu, integracjach z bibliotekami. Aby to wykorzystać, należy zaimplementować metody w interfejsie ClusterListener (jawnie lub zaimplementować jako nową klasę).</p>\n<p>Przykładowa konfiguracja:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #8FBCBB\">MongoClient</span><span style=\"color: #D8DEE9FF\"> mongoClient </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">MongoClients</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">create</span><span style=\"color: #ECEFF4\">(</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #8FBCBB\">MongoClientSettings</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">builder</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">                        .</span><span style=\"color: #88C0D0\">applyToClusterSettings</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">builder </span><span style=\"color: #81A1C1\">-&gt;</span>\n<span style=\"color: #D8DEE9FF\">                                builder</span>\n<span style=\"color: #D8DEE9FF\">                                        .</span><span style=\"color: #88C0D0\">hosts</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #8FBCBB\">Collections</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">singletonList</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">ServerAddress</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">mongos.somedomain.local</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\">, </span><span style=\"color: #B48EAD\">27017</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #ECEFF4\">))</span>\n<span style=\"color: #D8DEE9FF\">                                        .</span><span style=\"color: #88C0D0\">addClusterListener</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">ClusterListener</span><span style=\"color: #D8DEE9FF\">() </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                                            </span><span style=\"color: #D08770\">@Override</span>\n<span style=\"color: #D8DEE9FF\">                                            </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #88C0D0\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #88C0D0\"> clusterOpening(</span><span style=\"color: #8FBCBB\">ClusterOpeningEvent</span><span style=\"color: #88C0D0\"> </span><span style=\"color: #D8DEE9\">event</span><span style=\"color: #88C0D0\">) </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #88C0D0\">                                                logger</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">info</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Successfully connected to cluster with id: {}</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #88C0D0\"> event</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">getClusterId</span><span style=\"color: #ECEFF4\">())</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                                registerMetrics</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #88C0D0\">event</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                                sendSomeInfoSomewhere</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                                doSomething</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                            </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">                                            </span><span style=\"color: #D08770\">@Override</span>\n<span style=\"color: #D8DEE9FF\">                                            </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #88C0D0\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #88C0D0\"> clusterClosed(</span><span style=\"color: #8FBCBB\">ClusterClosedEvent</span><span style=\"color: #88C0D0\"> </span><span style=\"color: #D8DEE9\">event</span><span style=\"color: #88C0D0\">) </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #88C0D0\">                                                logger</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">info</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Connection to cluster closed with id: {}</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #88C0D0\"> event</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">getClusterId</span><span style=\"color: #ECEFF4\">())</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                                sendSomeInfoSomewhere</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                            </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">                                            </span><span style=\"color: #D08770\">@Override</span>\n<span style=\"color: #D8DEE9FF\">                                            </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #88C0D0\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #88C0D0\"> clusterDescriptionChanged(</span><span style=\"color: #8FBCBB\">ClusterDescriptionChangedEvent</span><span style=\"color: #88C0D0\"> </span><span style=\"color: #D8DEE9\">event</span><span style=\"color: #88C0D0\">) </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #88C0D0\">                                                logger</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">info</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Cluster description changed with id: {}</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #88C0D0\"> event</span><span style=\"color: #81A1C1\">.</span><span style=\"color: #88C0D0\">getClusterId</span><span style=\"color: #ECEFF4\">())</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                                doSomething</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #88C0D0\">                                            </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">                                        </span><span style=\"color: #ECEFF4\">})</span>\n<span style=\"color: #D8DEE9FF\">                        </span><span style=\"color: #ECEFF4\">)</span></code></pre>\n<h3 id=\"dokumentacja-mongodb\">Dokumentacja MongoDB</h3>\n<p>Zachęcam do skorzystania z <a href=\"http://mongodb.github.io/mongo-java-driver/4.3/apidocs/mongodb-driver-core/com/mongodb/connection/ClusterSettings.Builder.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dokumentacji mongo-java-drivera dla ClusterSettings</a>. Można tu znaleźć wiele przydatnych informacji na temat tych i innych parametrów. O parametrach można przeczytać również w <a href=\"https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst#localthresholdms\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">oficjalnych wytycznych</a>_.</p>\n<p>To kilka przydatnych wartości, które warto znać i świadomie wykorzystywać. </p>\n","excerpt":"Powszechnie wykorzystywane klienty do łączenia się z bazą danych dostarczają wiele funkcjonalności i możliwości konfiguracji, które można przeoczyć - a są bardzo przydatne i mogą zoptymalizować","description":"Konfiguracja ClusterSettings w MongoDB Java Driver","timeToRead":3,"tags":[{"id":"mongodb","title":"mongodb","path":"/tag/mongodb/"},{"id":"java","title":"java","path":"/tag/java/"},{"id":"data","title":"data","path":"/tag/data/"},{"id":"database","title":"database","path":"/tag/database/"}]}},{"node":{"id":"8fa5a7196f6a5cf6e3f3573332ce17ab","title":"Elasticsearch - to nie tylko logi.","datetime":"2020-09-07 22:56:24","path":"/elasticsearch-to-nie-tylko-logi/","cover":"/images/posts/elasticsearch-zapytania/searching.jpg","content":"<p>Elasticsearch to zaawansowany silnik wyszukiwań a jednocześnie baza danych pozwalająca na przechowywanie różnych typów danych. Wykorzystywana jest głównie przy komercyjnych wyszukiwarkach oraz przy gromadzeniu logów systemowych. Dzięki Elasticsearch, możesz wykonywać skomplikowane wyszukiwania, filtry i agregacje, a także wykorzystywać słowniki.</p>\n<h3 id=\"wstępne-ustalenia\">Wstępne ustalenia</h3>\n<p>Ogólnie myślę, że sensownie będzie zapisywać działania do plików, dzięki czemu będzie łatwiej zrekonstruować listę kroków. Warto utworzyć tworzyć osobny katalog na czas ćwiczeń. Całość prawdopodobnie złożę jako projekt na githubie, więc będzie dostępny do sklonowania. </p>\n<h3 id=\"przykładowy-use-case\">Przykładowy use case</h3>\n<p>Razem z moim trzyosobowym zespołem w ramach hobbystycznych praktyk rozwijaliśmy mini-platformę do wystawiania ogłoszeń. Jednym z wymagań była wyszukiwarka, dzięki której mozna wyszukiwać produkty: po tytule, slowach kluczowych, kategorii, cenie i lokalizacji. Zdecydowaliśmy się na elasticsearch, ponieważ wspiera wyszukiwanie pełnotekstowe i geograficzne.</p>\n<h3 id=\"setup\">Setup</h3>\n<p>Na potrzeby zabawy postawimy sobie 2 kontenery dockerowe z elasticem + kibaną. Zdefiniowaliśmy:</p>\n<ul>\n<li>1 kontener z elasticsearch w wersji 7.8.0</li>\n<li>1 kontener z kibaną w wersji 7.6.0</li>\n<li>2 woluminy, na których będą przechowywane dane</li>\n<li>sieć o nazwie elastic-network</li>\n</ul>\n<p>Wersje nie są najnowsze, ale akurat miałam te obrazy lokalnie na komputerze. Można w razie czego zmienić na nowszą.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #8FBCBB\">version</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">2.2</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #8FBCBB\">services</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">es01</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">image</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">docker.elastic.co/elasticsearch/elasticsearch:7.8.0</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">environment</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">bootstrap.memory_lock=true</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">ES_JAVA_OPTS=-Xms512m -Xmx512m</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">discovery.type=single-node</span>\n<span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">volumes</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">data01:/usr/share/elasticsearch/data</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">ports</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">9200:9200</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">networks</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">elastic-network</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">kibana01</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">image</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">docker.elastic.co/kibana/kibana:7.6.0</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">container_name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">kib01</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">ports</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">5601:5601</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">environment</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #8FBCBB\">ELASTICSEARCH_URL</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">http://es01:9200</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #8FBCBB\">ELASTICSEARCH_HOSTS</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">http://es01:9200</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">depends_on</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">es01</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">networks</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #A3BE8C\">elastic-network</span>\n<span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #8FBCBB\">volumes</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">data01</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">driver</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">local</span>\n<span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #8FBCBB\">networks</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">elastic-network</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #8FBCBB\">driver</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">bridge</span></code></pre>\n<p>Przeklejamy powyższy plik do docker-compose.yml i zapisujemy. Posiadamy już deklaratywny plik, na podstawie którego docker-compose utworzy wszystko za nas.\nWykonujemy polecenie (dla osób z słabszym internetem - może trochę potrwać, bo pobierają się obrazy):</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">docker-compose up</span></code></pre>\n<p>Sprawdzamy czy wszystko działa:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">docker ps</span></code></pre>\n<p>Powinny się nam pojawić 2 działajace kontenery. Jeśli tak, to fajnie. :)</p>\n<h3 id=\"model-danych\">Model danych</h3>\n<p>Zanim cokolwiek ciekawego zaczniemy robić, musimy zamodelować nasze dane. </p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">text</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">text</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">:\"geo_point\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">double</span><span style=\"color: #ECEFF4\">\"</span></code></pre>\n<p>Idziemy w maksymalne uproszczenie schematu. Myślę, że model jest dość czytelny. Id zostanie dodane automatycznie. Mamy title i description o typie text, location jest punktem (x,y), który można osadzić na mapie, price to cena - double. Tyle na teraz wystarczy.</p>\n<h3 id=\"mappingi--typy\">Mappingi &#x26; Typy</h3>\n<p>W Elasticu nasz “scheme” definiujemy za pomocą mappingów. Określamy w nich strukturę dokumentów (np offer ). W mappingach można również zawrzeć w nich dodatkowe techniczne ustawienia - ilość replik, timeouty. Dawniej w jednym indexie mozna było przechowywać wiele typów, co powodowało czasem dziwne błędy. Jednak w najnowszych wersjach elastica, jest jeden “typ” per index. Da się to ominąć, znajdziesz to w <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html#_custom_type_field.\" title=\"dokumentacji\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dokumentacji</a>.</p>\n<p>Zapisujemy poniższą składnię w pliku offer_mapping.json. Umożliwi to nam stworzenie indeksu. Wykorzystamy go za chwile. </p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">mappings</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">properties</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">text</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                   </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">text</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                   </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">geo_point</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                   </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">double</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>Wykonujemy komendę, tworząc tym samym nowy index.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">curl -H </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Content-Type: application/json</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> -X PUT http://localhost:3000/offers --data </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">@offer_schema.json</span><span style=\"color: #ECEFF4\">\"</span></code></pre>\n<p>W dalszej części do wykonywania requestów będę już używać devtoolsów w kibanie, bo będzie czytelniej. Jeśli nie chcesz tego używać i wolisz CLI, z łatwością wykonasz requesty np. curlem, jak powyżej.</p>\n<h4 id=\"kibana-devtools\">Kibana Devtools</h4>\n<p><img src=\"/images/posts/elasticsearch-zapytania/elasticsearch-1.png\" alt=\"Tak wyglądają devtoolsy\" title=\"Tak wyglądają devtoolsy\"></p>\n<h3 id=\"feedowanie-danych\">Feedowanie danych</h3>\n<p>Poniżej mini-zbiór danych do sprawdzenia, jak to działa.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">POST offers/_doc</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpety rozmiar 36</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">kolorowe skarpetki w kropki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                 </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">40</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">                 </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-70</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10.00</span>\n<span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">POST offers/_doc</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">szelki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">szelki w kolorze czarnym, rozmiar XS</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                 </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">50</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">                 </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-40</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">14.00</span>\n\n<span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">POST offers/_doc</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">muszka</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">czerwona, męska</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                 </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">50</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">                 </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-30</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">               </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">130.00</span>\n\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<h3 id=\"scenariusze-z-życia-wzięte\">Scenariusze z życia wzięte:</h3>\n<h4 id=\"użytkownik-wyszukuje-pełnotekstowo-po-tytule-oferty\">Użytkownik wyszukuje pełnotekstowo po tytule oferty:</h4>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">GET offers/_search</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">query</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">match</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpetki</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>Odpowiedź z serwera, widzimy znaleziony rekord, ponieważ w tytule zawarte jest słowo \"skarpetki\":</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">took</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">timed_out</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">false</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_shards</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">successful</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">skipped</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">failed</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">relation</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">eq</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">max_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0.7389809</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_index</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">offers</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_type</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">_doc</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_id</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">QiyNanQB6SAY5Ir04SbI</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0.7389809</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_source</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpety rozmiar 36</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">kolorowe skarpetki w kropki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">40</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-70</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10.0</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<h4 id=\"użytkownik-w-filtrach-wybiera-zakres-cenowy\">Użytkownik w filtrach wybiera zakres cenowy</h4>\n<p>Ustalamy:</p>\n<ul>\n<li>gte (greater than or equal) - większe lub równe 10, </li>\n<li>lte (lower than or equal) - mniejsze lub równe 20</li>\n</ul>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">GET offers/_search</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">query</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">range</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">gte</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lte</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">20</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">boost</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">2.0</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>Znalezione 2 oferty, z ceną większą niż 10 ale mniejszą niż 20.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">took</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">timed_out</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">false</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_shards</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">successful</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">skipped</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">failed</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">2</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">relation</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">eq</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">max_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">2.0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_index</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">offers</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_type</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">_doc</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_id</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">QiyNanQB6SAY5Ir04SbI</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">2.0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_source</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpety rozmiar 36</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">kolorowe skarpetki w kropki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">40</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-70</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10.0</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_index</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">offers</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_type</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">_doc</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_id</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">RCyNanQB6SAY5Ir07CYY</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">2.0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_source</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">szelki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">szelki w kolorze czarnym, rozmiar XS</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">50</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-40</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">14.0</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<h4 id=\"szukanie-po-lokalizacji\">Szukanie po lokalizacji:</h4>\n<p>Chcemy znaleźć oferty w promieniu 100km od miejscowości o współrzędnych [-70.001, 40.002]</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">GET offers/_search</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">query</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">bool</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">must</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">match_all</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{}</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">filter</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">geo_distance</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">distance</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">100km</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span><span style=\"color: #B48EAD\">-70.001</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">40.002</span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>Odpowiedź z serwera:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">took</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">timed_out</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">false</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_shards</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">successful</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">skipped</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">failed</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">relation</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">eq</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">max_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1.0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_index</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">offers</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_type</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">_doc</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_id</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">-SyVanQB6SAY5Ir0BSZs</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1.0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_source</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpety rozmiar 36</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">kolorowe skarpetki w kropki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">40</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-70</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10.0</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>Znalazło 1 rekord o współrzędnych [-70, 40].</p>\n<h4 id=\"wyszukiwanie-również-w-opisie\">Wyszukiwanie również w opisie</h4>\n<p>Mamy 1 rekord, który w tytule ma \"skarpety\" a w opisie \"skarpetki\". Chcemy go wyszukać po opisie. Ogólnie da się skonfigurować, żeby wyszukiwało pochodne słowa od skarpety, ale to może w innym poście :)</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">GET offers/_search</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">query</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">multi_match</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">query</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpetki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">fields</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">]</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>No i mamy znalezione skarpetki.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">took</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">timed_out</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">false</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_shards</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">successful</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">skipped</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">failed</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">total</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">1</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">relation</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">eq</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">max_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0.9808291</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">hits</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_index</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">offers</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_type</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">_doc</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_id</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">-SyVanQB6SAY5Ir0BSZs</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_score</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">0.9808291</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">_source</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">skarpety rozmiar 36</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">kolorowe skarpetki w kropki</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">location</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lat</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">40</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">lon</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">-70</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">price</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10.0</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>To tyle na dziś. Jako czytelnik różnych blogów lubię, gdy jest dużo przykładów, więc też w takiej formie postanowiłam stworzyć wpis. Będę testować, czy przyjemniej mi się tak pisze.</p>\n","excerpt":"Elasticsearch to zaawansowany silnik wyszukiwań a jednocześnie baza danych pozwalająca na przechowywanie różnych typów danych. Wykorzystywana jest głównie przy komercyjnych wyszukiwarkach oraz przy","description":"Elasticsearch - nie tylko logi","timeToRead":5,"tags":[{"id":"elk","title":"elk","path":"/tag/elk/"},{"id":"elasticsearch","title":"elasticsearch","path":"/tag/elasticsearch/"},{"id":"data","title":"data","path":"/tag/data/"},{"id":"database","title":"database","path":"/tag/database/"}]}},{"node":{"id":"888e79f6459f76d95ede4741ee5f58ca","title":"Prawo Demeter - zasada ograniczenia interakcji","datetime":"2020-04-30 15:56:24","path":"/prawo-demeter-zasada-ograniczenia-interakcji/","cover":"/images/posts/prawo-demeter/cover.jpg","content":"<p>Przy projektowaniu obiektowym możemy się zastanowić, w jaki sposób uprościć relacje między naszymi obiektami, tak aby zmiana w jednej klasie nie propagowała konieczności zmian w wielu innych.\nZ pomocą przychodzi nam <a href=\"https://pl.wikipedia.org/wiki/Prawo_Demeter\" title=\"**prawo Demeter,** \" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>prawo Demeter,</strong> </a>które w skrócie ogranicza nas do interakcji jedynie z najbliższymi sąsiednimi obiektami. Dzięki temu, nasz obiekt jest zależny tylko od swoich sąsiadów. Kiedy implementacja sąsiada naszego sąsiada się zmieni - nie interesuje nas to. Jest to tak zwany luźny związek (<em>ang. loose coupling</em>).\nNie łamiemy w ten sposób zasady enkapsulacji obiektu i nie tworzymy dużej ilości powodów, dla których mielibyśmy modyfikować naszą klasę. W ten sposób możemy sprawić, że nasz projekt jest zgodny z zasadami <a href=\"https://pl.wikipedia.org/wiki/SOLID_(programowanie_obiektowe)\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SOLID</a>.\nPoniżej, na przykładzie logiki aplikacji quizowej, możemy przeanalizować przypadek <strong>tight coupled</strong> (1) i<strong> loose coupled</strong> (2). </p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">//// przykład tight coupling (1)</span>\n<span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">QuizWhichBreaksLawOfDemeter</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> questions</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> Question[]</span>\n<span style=\"color: #ECEFF4\">    </span><span style=\"color: #4C566A\">// ...</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">isAnswerCorrect</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">question</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> Question</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #ECEFF4\">     </span><span style=\"color: #4C566A\">// poniżej łamiemy Prawo Demeter</span>\n<span style=\"color: #ECEFF4\">     </span><span style=\"color: #4C566A\">// wnikając w implementację answer</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">question</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getAnswer</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getId</span><span style=\"color: #D8DEE9FF\">() </span><span style=\"color: #81A1C1\">==</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #D8DEE9\">question</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getUserAnswer</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getId</span><span style=\"color: #D8DEE9FF\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">  </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">countCorrectAnswers</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">number</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">questions</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">filter</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">q</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">isAnswerCorrect</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">q</span><span style=\"color: #D8DEE9FF\">))</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">length</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span>\n\n<span style=\"color: #4C566A\">// anemiczna klasa question, nic prócz getterów i setterów</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Question</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> answer</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> QuizOption</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> userAnswer</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> QuizOption</span>\n<span style=\"color: #ECEFF4\">    </span><span style=\"color: #4C566A\">// ...</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">getUserAnswer</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> QuizOption </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">userAnswer</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">getAnswer</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> QuizOption </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">answer</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span></code></pre>\n<p>W powyższym przykładzie z poziomu quizu dostajemy się do wnętrza answer, który nie jest naszym bezpośrednim sąsiadem (quiz &#x3C;-> question &#x3C;-> answer). Metoda <code>isAnswerCorrect()</code> wywołuje łańcuch <code>question.getUserAnswer().getId()</code>, dostając się głęboko do struktury, której szczegółów implementacyjnych nie powinniśmy znać. Łamiemy Prawo Demeter. </p>\n<p>Zastanówmy się, jak możemy rozwiązać ten problem. Musimy ograniczyć splątanie naszych klas i ich wspólną zależność od siebie.\nPoniżej przykład, który jest nieco lepszy. Metoda <code>isAnswerCorrect()</code> została przeniesiona z klasy Quiz, do klasy Question. Manipuluje ona już swoimi własnymi sąsiadami, wystawiając Quizowi tylko metodę do sprawdzenia ( <code>isAnswerCorrect()</code> ).</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">// przykład loose coupling (2)</span>\n<span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">QuizLooseCoupled</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    questions</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> Question[]</span>\n<span style=\"color: #ECEFF4\">\t</span><span style=\"color: #4C566A\">// nie interesuje nas jak jest sprawdzana odpowiedź</span>\n<span style=\"color: #ECEFF4\">\t</span><span style=\"color: #4C566A\">// po prostu wywołujemy metodę naszego sąsiedniego obiektu</span>\n<span style=\"color: #D8DEE9FF\">     </span><span style=\"color: #88C0D0\">countCorrectAnswers</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">number</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">questions</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">filter</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">q</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">q</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">isAnswerCorrect</span><span style=\"color: #D8DEE9FF\">())</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">length</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Question</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #ECEFF4\">    </span><span style=\"color: #4C566A\">// ...</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> answer</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> QuizOption</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> userAnswer</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> QuizOption</span>\n<span style=\"color: #ECEFF4\">    </span><span style=\"color: #4C566A\">// tutaj przeniesiona jest odpowiedzialność funkcji</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">isAnswerCorrect</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">answer</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getId</span><span style=\"color: #D8DEE9FF\">() </span><span style=\"color: #81A1C1\">===</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">userAnswer</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getId</span><span style=\"color: #D8DEE9FF\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span></code></pre>\n<p>Podany przykład jest prosty. Popełnienie błędu z pierwszej sekcji nie jest fatalne w skutkach, refaktoryzacja zajmie pół minuty. W przypadku większych aplikacji z wieloma tight coupled obiektami może powstać problem, który poskutkuje efektem domina - naprawiając jeden obiekt, musimy naprawić 2,3,4 następnych…</p>\n<p>Na ile posiadamy czasu, warto zastanowić się nad rozluznieniem wiezi naszych obiektów póki nie ma dramatu - nie żyjemy w starożytnej Grecji, ale Prawo Demeter warto znać :) </p>\n<p>Całość kodu można znaleźć na moim <a href=\"https://github.com/evilghostgirl/law-of-demeter\" title=\"githubie\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">githubie</a>.</p>\n","excerpt":"Przy projektowaniu obiektowym możemy się zastanowić, w jaki sposób uprościć relacje między naszymi obiektami, tak aby zmiana w jednej klasie nie propagowała konieczności zmian w wielu innych. Z","description":"Krótka notatka o prawie demeter z przykładami","timeToRead":2,"tags":[{"id":"SOLID","title":"SOLID","path":"/tag/SOLID/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"TypeScript","title":"TypeScript","path":"/tag/TypeScript/"},{"id":"programowanie","title":"programowanie","path":"/tag/programowanie/"}]}},{"node":{"id":"e8c9d1ee5f11bad9b7871e8cff0f2f63","title":"Wykonywanie kopii obiektów w JavaScript","datetime":"2020-03-01 14:43:24","path":"/wykonywanie-kopii-obiektow-w-java-script/","cover":"/images/posts/kopie/cover.jpg","content":"<p>Kopiowanie to mechanizm tworzenia duplikatów. W przypadku prymitywów (string, number, boolean itd) sprawa jest prosta, możemy spokojnie wykonywać wszystkie operacje bez obaw o nadpisywanie oryginału. Sprawa się komplikuje przy zastosowaniu przypisania obiektu za pomocą prostego = - wtedy tworzy się referencja do oryginału. Kopia jest zależna od oryginału, więc każda modyfikacja w obiekcie oddziałuje na resztę obiektów. Czasami taki efekt nie jest pożądany, niestety w js brakuje natywnych, prostych sposobów na klonowanie obiektów bez tworzenia referencji (wskaźnika na oryginał), trzeba w tym celu wykorzystywać różne hacki. W tym artykule omówię część z nich, mam nadzieję że komuś się przydadzą.</p>\n<h2 id=\"trochę-teorii\">Trochę teorii</h2>\n<p>Istnieją rodzaje kopiowania obiektów w js:</p>\n<ul>\n<li>Brak - referencja, wskazuje na adres obiektu macierzystego. Przy podmianie jakiejkolwiek wartości obiektu, zamieniają się one równocześnie w kopii i oryginale. Kopia jest silnie zależna od oryginału.</li>\n<li>Płytkie (shallow) - otrzymujemy prostą kopię, która posiada jednopoziomową kopię, głębsze zagnieżdzenia są referencją do oryginału i przy podmianie wartości zmieni się również w innych obiektach.</li>\n<li>Głębokie (deep) - kopie są identyczne, jednak niezależne od siebie. Obiekt jest autonomiczny, posiada wartości na własność, nic nie współdzieli - zmiana w oryginale nie zmieni kopii.</li>\n</ul>\n<h2 id=\"brak-kopii\">Brak kopii</h2>\n<p>Zacznijmy od tego, w jaki sposób nie skopiujemy obiektu, a który jednak początkowo wydaje się słusznym i prostym rozwiązaniem. Jak widać, przy podmianie wartości w klonie, wartość oryginału również się zmieniła, co nie jest oczekiwanym efektem.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">// proste przypisanie  </span>\n<span style=\"color: #81A1C1\">var</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">kolor</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">czerwony</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">smak</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">słodki</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">rozmiar</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">duży</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">wymiary</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">x</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">y</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">32</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">z</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">33</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">var</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">mały</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #4C566A\">// mały</span></code></pre>\n<h2 id=\"płytkie-kopie\">Płytkie kopie</h2>\n<p>Część funkcji dostarczonych natywnie przez JavaScript umożliwia płytkie skopiowanie obiektu. Dopóki zajmujemy się przestrzenią bez zagnieżdżeń, wszystko działa jak powinno. Problem pojawia się, gdy modyfikujemy zagnieżdżone obiekty - wtedy nadal możemy modyfikować oryginał, co nie jest pożądane (dzięki rekurencyjnemu użyciu płytkich kopii możemy jednak stworzyć głęboką kopię, czym zajmiemy się później). Poniżej natywny sposób na płytką kopię: </p>\n<h3 id=\"objectassign\">Object.assign()</h3>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">//Tworzy płytką kopię - klonuje właściwości najwyższego poziomu, pozostawiając referencję do zagnieżdzonych  </span>\n<span style=\"color: #81A1C1\">var</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Object</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">assign</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{},</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span><span style=\"color: #D8DEE9FF\">  </span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">mały</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #81A1C1\">;</span><span style=\"color: #D8DEE9FF\">  </span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #4C566A\">// \"duży\"  </span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">wymiary</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">x </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">32</span><span style=\"color: #D8DEE9FF\">  </span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">wymiary</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">x) </span><span style=\"color: #4C566A\">//32, wartość jest podmieniona przez modyfikacje na poziomce!</span></code></pre>\n<h3 id=\"spread-operator-es6\">Spread operator ES6</h3>\n<p>Standard ES6 przynosi nam proste ułatwienia, pozwalające na dokonywanie kopii. Jednym z nich jest spread operator (...), który płytko ignoruje wskaźnik do obiektu macierzystego. Dzięki temu otrzymujemy obiekty niezależne.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">var</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">kolor</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">czerwony</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">smak</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">słodki</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">rozmiar</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">duży</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">wymiary</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">x</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">y</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">32</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">z</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">33</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">...</span><span style=\"color: #D8DEE9\">truskawka</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">mały</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #4C566A\">// \"duży\", wszystko OK!  </span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">wymiary</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">x </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">32</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">wymiary</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">x) </span><span style=\"color: #4C566A\">//32, znowu podmienione przez poziomke :(</span></code></pre>\n<h2 id=\"sposoby-na-głęboką-kopię\">Sposoby na głęboką kopię</h2>\n<h3 id=\"jsonparse-jsonstringify\">JSON.parse(), JSON.stringify()</h3>\n<p>Kiedy tworzymy klona, chcielibyśmy by był całkowicie niezależny referencyjnie od oryginału, a jednocześnie był identyczny jak on. Łatwo można to uzyskać za pomocą niezbyt eleganckiej sztuczki z JSONem. Metoda ta działa tylko z czystymi strukturami danych - obiekt w tym wypadku nie może zawierać funkcji. Osobiście nie stosowałabym tego sposobu - w przypadku gdy przy wstępnych założeniach obiekt jest zwykłą strukturą danych, a później nieświadomy inny programista dopisze do niego metody, pojawi się nieoczekiwany i problematyczny bug.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">var</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">kolor</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">czerwony</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">smak</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">słodki</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">rozmiar</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">duży</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">wymiary</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">x</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">10</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">y</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">32</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">z</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">33</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">JSON</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">parse</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #81A1C1\">JSON</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">stringify</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #D8DEE9FF\">))</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">mały</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">rozmiar</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #4C566A\">// \"duży\", wszystko OK!  </span>\n<span style=\"color: #D8DEE9\">poziomka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">wymiary</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">x </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">32</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">truskawka</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">wymiary</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">x) </span><span style=\"color: #4C566A\">//10, wszystko OK!</span></code></pre>\n<h3 id=\"customowa-funkcja-do-głębokiego-kopiowania\">Customowa funkcja do głębokiego kopiowania</h3>\n<p>Posiadamy już narzędzia do tworzenia płytkich kopii, możemy więc je wykorzystać przy tworzeniu głębokich kopii, wystarczy tylko wykorzystać rekurencję i posklejać to w jedno. Algorytm sprawdza czy przekazana w argumencie wartość - jeśli jest prymitywem, po prostu zwraca go. W przypadku gdy argument jest obiektem, przechodzimy po każdym jego polu i sprawdzamy czy jest ono typem prymitywnym, jeśli nie - wywołujemy funkcję dla pola nie-prymitywnego . Wszystko się powtarza do momentu, gdy algorytm przejdzie po całym drzewie.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">deepCopyFunc</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">let</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">parent</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">value</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">key</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\"> (</span><span style=\"color: #81A1C1\">typeof</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">!==</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">object</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">||</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">===</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #4C566A\">// zwracamy jeśli jest typem prymitywnym  </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">parent</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Array</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">isArray</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #81A1C1\">?</span><span style=\"color: #D8DEE9FF\"> [] </span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{}</span>\n\n<span style=\"color: #ECEFF4\">    </span><span style=\"color: #4C566A\">//jeśli jest obiektem to iterujemy po każdym property  </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">for</span><span style=\"color: #D8DEE9FF\"> (</span><span style=\"color: #D8DEE9\">key</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">in</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">value</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">child</span><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">key</span><span style=\"color: #D8DEE9FF\">]</span>\n<span style=\"color: #ECEFF4\">        </span><span style=\"color: #4C566A\">//jeśli wartość dla key jest obiektem to wykonujemy rekurencyjną kopie  </span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\"> (</span><span style=\"color: #D8DEE9\">value</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">!==</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">&&</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">typeof</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">value</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">===</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">object</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #D8DEE9\">parent</span><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">key</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">deepCopyFunc</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">value</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">else</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #D8DEE9\">parent</span><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">key</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">value</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">parent</span>\n<span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #81A1C1\">let</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">originalArray</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> [</span><span style=\"color: #B48EAD\">37</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">3700</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">hello</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">world</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">]</span></code></pre>\n<p>Myślę, że artykuł okazał się pomocny, a moje objaśnienia niezbyt trudne. Jeśli zauważysz gdzieś błąd, proszę, napisz do mnie. Zależy mi, by mój blog był rzetelnym źródłem informacji, więc z chęcią przyjmuję krytykę.</p>\n","excerpt":"Kopiowanie to mechanizm tworzenia duplikatów. W przypadku prymitywów (string, number, boolean itd) sprawa jest prosta, możemy spokojnie wykonywać wszystkie operacje bez obaw o nadpisywanie oryginału.","description":"Opisuję metody wykonywania klonów obiektów","timeToRead":4,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"programowanie","title":"programowanie","path":"/tag/programowanie/"}]}},{"node":{"id":"87878ebd4d6ae18716accce38e5545d2","title":" Nie wiesz co klienci sądzą o twoim produkcie? Stwórz ankietę!","datetime":"2018-11-07 10:56:24","path":"/nie-wiesz-co-klienci-sadza-o-twoim-produkcie-stworz-ankiete/","cover":"/images/posts/ankiety/13.png","content":"<h3 id=\"jednym-z-największych-grzechów-początkujących-przedsiębiorców-jest-wprowadzanie-produktów-pod-wpływem-własnej-subiektywnej-oceny-konkretnego-rynku\">Jednym z największych grzechów początkujących przedsiębiorców jest wprowadzanie produktów pod wpływem własnej, subiektywnej oceny konkretnego rynku.</h3>\n<p>Pobieżne przejrzenie trendów i analizowanie ich tak, by potwierdzały nasze własne tezy, jest bardzo złudną pułapką, którą sami sobie możemy stworzyć. By temu zapobiec i nie stracić pieniędzy, konieczne jest dokładne wybadanie potrzeb konsumentów. Poza standardową analizą rynku (np. silne/słabe strony produktu, cykl życia produktu, koniunktura, udział w rynku, wielkość rynku i wiele, wiele innych...) - z pomocą przychodzą nam proste, bardzo niedocenione narzędzia - ankiety.</p>\n<p>Kojarzą się źle - mamy do tego podstawy. Wiele polskich kampanii, podczas których zbierano dane, było przeprowadzonych w sposób <em>nieprzyjemny</em>. </p>\n<p>Natrętne, wyskakujące popupy, które trudno wyłączyć; scamy obiecujące drogi sprzęt elektroniczny za wypełnienie ankiety; długie, męczące ankiety wypełniane przez osoby chcące zarobić, które później zostają oszukane. Takie sposoby nie są ani skuteczne, ani przyjemne. </p>\n<p>Nikt, bez motywacji finansowej lub obietnicy nagrody nie wypełniłby ich sam z siebie, a już tym bardziej zgodnie z prawdą i starannie. A tu własnie o to chodzi - <strong>skłonić ludzi, by sami z siebie odpowiadali na pytania.</strong> </p>\n<p>Ludzie chcą pomagać, wystarczy ich w cywilizowany sposób o to poprosić a nie zmuszać. Takie badania są o wiele bardziej miarodajne niż ankiety klikane losowo aby je już skończyć.</p>\n<h3 id=\"co-charakteryzuje-dobrą-ankietę-logika\">Co charakteryzuje dobrą ankietę? Logika.</h3>\n<p>Otaczająca nas rzeczywistość zmusza nas do formułowania precyzyjnych pytań, szczególnie w czasach, gdy wiele spraw załatwiamy przez internet. Nie sposób opisać wszystko tak, by zadowolić każdego. Często znajdzie się jakaś wątpliwość, którą warto rozwiać, szczególnie w sektorze e-zakupów. Umiejętność odpowiedniego zadawania pytań uchroni nas w tym wypadku przed \"towarem niezgodnym z opisem\". Dlaczego by nie wykorzystać naszej wrodzonej zdolności do zwiększenia przychodu?</p>\n<blockquote>\n<p>Kto nie pyta - błądzi. Kto źle pyta - otrzymuje złe odpowiedzi. Kto dobrze pyta - uzyskuje kluczowe informacje za darmo. </p>\n</blockquote>\n<p>Nie musisz się martwić - nawet Twoja pierwsza ankieta może ukończyć się sukcesem. Wystarczy, że zastosujesz w niej parę istotnych wskazówek.</p>\n<p><img src=\"/images/posts/ankiety/1.png\" alt=\"Przykładowa sonda\" title=\"Przykładowa sonda\"></p>\n<div align=\"center\">\nPrzykładowa sonda\n</div>\n<h3 id=\"grupa-docelowa\">Grupa docelowa</h3>\n<p>Aby trafić do grupy docelowej musisz nie tylko rozesłać do nich ankietę. <strong>Powinieneś zabezpieczyć się przed trafieniem do osoby spoza targetu.</strong> Określ, kim ma być respondent. Czym się wyróżnia na tle innych osób? Za pomocą jakiej informacji dowiesz się, że należy on do Twojego targetu?</p>\n<p>Jeśli umieścisz przymusową ankietę na swojej stronie internetowej - skąd możesz mieć pewność czy ankietowana osoba kiedykolwiek używała Twój produkt? </p>\n<p>Może trafiła na nią przez przypadek? </p>\n<p>Co zrobisz jeśli nie trafiłeś do grupy docelowej?</p>\n<p>Jeśli ktoś nie zna tego produktu i nie miał z nim realnej styczności, a przymusisz go do wypełnienia ankiety, z dużą dozą prawdopodobieństwa albo wyjdzie ze strony www, albo wystawi ocenę na 0, nie widząc w tym nic złego. Obniży w ten sposób średnią, przez co dane nie będą miarodajne. Nawet zadając pytania w postaci mailingu do klientów. powinieneś się zabezpieczyć pytaniem filtrującym - przykładowo Twój produkt mógł być prezentem dla kogoś i nie był używany bezpośrednio przez kupującego.</p>\n<p>[pytanie filtrujące] : \"Czy używałeś osobiście produktu X?\"</p>\n<ul>\n<li>[jeśli odpowiedź tak] : \"Jak oceniasz komfort użytkowania produktu X? Dlaczego?\"</li>\n<li>[jeśli odpowiedź nie] : \"Czy planujesz zakup produktu X? Dlaczego?\"</li>\n</ul>\n<p>W taki sposób możesz stworzyć logiczny ciąg swojej ankiety.</p>\n<blockquote>\n<p>Wskazówka 1: Zadawaj pytania filtrujące by nie otrzymać odpowiedzi od niepożądanych osób</p>\n</blockquote>\n<h3 id=\"od-ogółu-do-szczegółu\">Od ogółu do szczegółu</h3>\n<p>Planując strukturę swojej ankiety podziel ją na <strong>sekcje</strong>. Nie ma z góry ustalonej formy, jaką powinieneś zachować. Istotne jest jednak, by posortować pytania zgodnie z ich kategoriami. Jeśli pytasz kogoś jak często używa żelazko, nie pytaj w następnym kroku o ulubiony smak koktajlów owocowych, a potem znowu o żelazko.  </p>\n<h3 id=\"przykładowa-struktura-ankiety\">PRZYKŁADOWA STRUKTURA ANKIETY</h3>\n<p><em>Krótki opis ankiety, dlaczego skierowałeś ją do odbiorcy, w czym ci to pomoże itd.</em></p>\n<p>[pytania wprowadzające]</p>\n<ul>\n<li>Wiek</li>\n<li>Płeć</li>\n<li>Zarobki</li>\n<li>Skąd dowiedziałeś się o naszym sklepie?</li>\n</ul>\n<p>[pytania o produkt A]</p>\n<ul>\n<li>Czy używałeś produktu?</li>\n<li>Jakie miałeś pierwsze wrażenie na widok naszego produktu?</li>\n<li>Dlaczego kupiłeś ten produkt?</li>\n<li>Jakie wątpliwości miałeś przed zakupem?</li>\n<li>\n<ul>\n<li>Czy miałeś alternatywy do naszego produktu?</li>\n</ul>\n</li>\n<li>\n<ul>\n<li>Jakie inne produkty rozważałeś?</li>\n</ul>\n</li>\n<li>\n<ul>\n<li>W czym nasz produkt wypadł lepiej od innych?</li>\n</ul>\n</li>\n<li>\n<ul>\n<li>Co cię przekonało do zakupu akurat naszego produktu?</li>\n</ul>\n</li>\n</ul>\n<p>[pytania o świadczoną usługę]</p>\n<ul>\n<li>Czy tempo realizacji zamówienia było satysfakcjonujące?</li>\n<li>Czy czas wysyłki był satysfakcjonujący?</li>\n<li>Czy (i jeśli tak to - jaką?) zasugerowałbyś inną formę wysyłki?</li>\n<li>Czy masz zastrzeżenia związane z zabezpieczeniem produktu przed wysyłką?</li>\n<li>Czy korzystałeś z naszej infolinii?</li>\n<li>Czy strona internetowa wydaje Ci się prosta w obsłudze?</li>\n<li>Czy brakuje Ci jakiegoś produktu w naszej ofercie?</li>\n</ul>\n<h3 id=\"czy-pytać-o-proste-dane-osobowe\">Czy pytać o proste dane osobowe?</h3>\n<p>Są różne poglądy na ten temat. Jedni uważają, że pytania osobiste np o zarobki to za dużo. Inni nie widzą w tym nic złego. Pozostaje też kwestia sporna kiedy o to zapytać.  Na wprowadzeniu czy na końcu? Użytkownik otrzymując prywatne pytania już na początku, może się zniechęcić na wstępie. Z drugiej strony, jeśli jednak już poda dane, to prawdopodobnie nie wycofa się w środku ankiety, a wypełni ją do samego końca. </p>\n<p>Z drugiej strony zalety pytania o osobiste rzeczy można zadać w ostatniej sekcji. Nie będziemy niepokoili naszego ankietariusza i w spokoju rozwiąże ankietę. Jest jednak ryzyko, że w połowie się wycofa i porzuci wypełnianie danych, bo nie będzie się czuł związany z ankietą. </p>\n<p>Oba rozwiązania mają swoje plusy i minusy. Ja jednak preferuję grać w otwarte karty i zapytać od razu, ponieważ nie wywoła to zbyt dużego zaskoczenia. Osoba będzie wiedziała już na wstępie ile informacji potrzebujemy o niej i będzie mogła ocenić, czy chce nam powierzyć te dane.</p>\n<h3 id=\"przydatne-narzędzia-do-ankietowania\">Przydatne narzędzia do ankietowania:</h3>\n<ul>\n<li><a href=\"https://www.google.com/forms/about/\" title=\"Google Forms\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google Forms</a></li>\n<li><a href=\"surveyplanet.com\" title=\"surveyplanet.com\">surveyplanet.com</a></li>\n<li><a href=\"surveygizmo.com\" title=\"surveygizmo.com\">surveygizmo.com</a></li>\n<li><a href=\"survey.zoho.com\" title=\"survey.zoho.com\">survey.zoho.com</a></li>\n</ul>\n<p>Mi osobiście najbardziej z przebadanych przeze mnie ankiet, spodobało się survey.zoho.com. Ma bardzo ładny interfejs użytkownika, który jest jednocześnie intuicyjny i prosty. Nietechniczna osoba nie miałaby problemu by się w nim odnaleźć. Narzędzie posiada różne plany do wykupienia, jest wśród nich darmowy, trochę okrojony, choć można go używać bezproblemowo. W planie free zawierają się:</p>\n<ul>\n<li>Nielimitowane ankiety </li>\n<li>Maksymalnie 10 pytań do jednej ankiety</li>\n<li>Maksymalnie 100 ankietowanych do jednej ankiety</li>\n<li>Ponad 200 szablonów</li>\n<li>HTTPS</li>\n<li>Zabezpieczenie ankiety hasłem</li>\n</ul>\n<h3 id=\"poniżej-wrzucam-trochę-screenshotów-z-aplikacji-survey-zoho\">Poniżej wrzucam trochę screenshotów z aplikacji Survey Zoho.</h3>\n<p><img src=\"/images/posts/ankiety/2.png\" alt=\"Startowy widok\" title=\"Startowy widok\"></p>\n<div align=\"center\">Startowy widok</div>\n<p><img src=\"/images/posts/ankiety/3.png\" alt=\"Dodawanie ankiety\" title=\"Dodawanie ankiety\"></p>\n<div align=\"center\">Dodawanie ankiety</div>\n<p><img src=\"/images/posts/ankiety/4.png\" alt=\"Przejrzysty, prosty w obsłudze panel\" title=\"Przejrzysty, prosty w obsłudze panel\"></p>\n<div align=\"center\">Przejrzysty, prosty w obsłudze panel</div>\n<p><img src=\"/images/posts/ankiety/5.png\" alt=\"Łatwa edycja pytania\" title=\"Łatwa edycja pytania\"></p>\n<div align=\"center\">Łatwa edycja pytania</div>\n<p><img src=\"/images/posts/ankiety/6.png\" alt=\"Podgląd czystej ankiety\" title=\"Podgląd czystej ankiety\"></p>\n<div align=\"center\">Podgląd czystej ankiety</div>\n<p><img src=\"/images/posts/ankiety/7.png\" alt=\"Możliwość personalizacji kolorystycznej ankiety\" title=\"Możliwość personalizacji kolorystycznej ankiety\"></p>\n<div align=\"center\">Możliwość personalizacji kolorystycznej ankiety</div>\n<p><img src=\"/images/posts/ankiety/8.png\" alt=\"Dodawanie własnego tła\" title=\"Dodawanie własnego tła\"></p>\n<div align=\"center\">Dodawanie własnego tła</div>\n<p><img src=\"/images/posts/ankiety/9.png\" alt=\"Integracja z rożnymi serwisami, w tym Google Sheets\" title=\"Integracja z rożnymi serwisami, w tym Google Sheets\"></p>\n<div align=\"center\">\nIntegracja z rożnymi serwisami, w tym Google Sheets </div>\n<p><img src=\"/images/posts/ankiety/10.png\" alt=\"Planowanie ankiety\" title=\"Planowanie ankiety\"></p>\n<div align=\"center\">\nPlanowanie ankiety </div>\n<p><img src=\"/images/posts/ankiety/11.png\" alt=\"Zabezpieczanie hasłem\" title=\"Zabezpieczanie hasłem\"></p>\n<div align=\"center\">\nZabezpieczanie hasłem </div>\n<p><img src=\"/images/posts/ankiety/12.png\" alt=\"Gotowa ankieta\" title=\"Gotowa ankieta\"></p>\n<div align=\"center\">Gotowa ankieta </div>\n<p><img src=\"/images/posts/ankiety/12a.png\" alt=\"Podgląd indywidualnych odpowiedzi\" title=\"Podgląd indywidualnych odpowiedzi\"></p>\n<div align=\"center\">\nPodgląd indywidualnych odpowiedzi</div>\n<p><img src=\"/images/posts/ankiety/13.png\" alt=\"Wgląd w ogólne statystyki, filtry itd\" title=\"Wgląd w ogólne statystyki, filtry itd\"></p>\n<div align=\"center\">\nWgląd w ogólne statystyki, filtry itd</div>\n<h3 id=\"google-forms\">Google Forms</h3>\n<p>Bardzo popularnym darmowym narzędziem do ankiet, często polecanym przez innych jest Google Forms. Jest zarządzalne z poziomu konta Google i nie trzeba się martwić zakładaniem nowych kont. Odpowiedzi można przeglądać zarówno jako ogólna całościowa statystyka, jak i da się obejrzeć wypełnioną ankietę przez konkretnego użytkownika. Dane są przechowywane na chmurze Google, a limitów odpowiedzi jako takich nie ma.</p>\n<p><img src=\"/images/posts/ankiety/14.png\" alt=\"Ogólny wygląd ankiety\" title=\"Ogólny wygląd ankiety\"></p>\n<div align=\"center\">Ogólny wygląd ankiety</div>\n<p><img src=\"/images/posts/ankiety/15.png\" alt=\"Wszystkie odpowiedzi w formie statystyki\" title=\"Wszystkie odpowiedzi w formie statystyki\"></p>\n<div align=\"center\"> Wszystkie odpowiedzi w formie statystyki  </div>\n<p><img src=\"/images/posts/ankiety/16.png\" alt=\"Odpowiedzi można przeglądać pojedynczo, obserwując w jaki sposób odpowiadał konkretny respondent\" title=\"Odpowiedzi można przeglądać pojedynczo, obserwując w jaki sposób odpowiadał konkretny respondent\"></p>\n<div align=\"center\">\nOdpowiedzi można przeglądać pojedynczo, obserwując w jaki sposób odpowiadał konkretny respondent\n</div>\n<h3 id=\"jak-dodać-wyrażenie-regularne\">Jak dodać wyrażenie regularne?</h3>\n<p>Przy tworzeniu ankiety można używać <a href=\"https://support.google.com/a/answer/1371417\" title=\"wyrażeń regularnych\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">wyrażeń regularnych</a> (RegEx - Regular Expression). Są to formuły, które deklarujemy (zgodnie z dokumentacją), po to, by spełniały określone przez nas kryteria. Czyli, dla przykładu, jeśli mamy pole tekstowe i chcemy, by użytkownik wpisał tam swój email, możemy stworzyć regułę, w której wymagamy by istniał CIĄG_ZNAKÓW@DOMENA.PL, inne opcje nie zostaną przyjęte i wyświetli się błąd.</p>\n<p><img src=\"/images/posts/ankiety/17.png\" alt=\"Klikamy zaznaczony czerwoną ramką plusik \" title=\"Klikamy zaznaczony czerwoną ramką plusik \"></p>\n<div align=\"center\">\nKlikamy zaznaczony czerwoną ramką plusik \n</div>\n<p><img src=\"/images/posts/ankiety/18.png\" alt=\"okienko\" title=\"okienko\"></p>\n<div align=\"center\">\nPojawia się takie okienko [jeśli po kliknięciu ikony go nie widzisz, upewnij się, czy nie dodał się niżej w ankiecie]. Wybieramy rozwijane menu (\"jednokrotny wybór\") i zaznaczamy \"Krótka odpowiedź\".\n</div>\n<p><img src=\"/images/posts/ankiety/19.png\" alt=\"okienko\" title=\"okienko\"></p>\n<div align=\"center\">\n Mamy zmieniony już typ pytania, teraz klikamy trzy kropeczki w prawym dolnym rogu.\n</div>\n<p><img src=\"/images/posts/ankiety/20.png\" alt=\"okienko\" title=\"okienko\"></p>\n<div align=\"center\">Pojawia się okienko, wybieramy \"Weryfikacja odpowiedzi\" </div>\n<p><img src=\"/images/posts/ankiety/21.png\" alt=\"okienko\" title=\"okienko\"></p>\n<div align=\"center\">\nW naszym polu pojawia się nowa rubryka. Klikamy \"Liczba\" i zmieniamy na \"Wyrażenie regularne\". \n</div>\n<p><img src=\"/images/posts/ankiety/22.png\" alt=\"okienko\" title=\"okienko\"></p>\n<div align=\"center\">\nUstawiamy warunek \"Zawiera/Nie zawiera\".\n</div>\n<p><img src=\"/images/posts/ankiety/23.png\" alt=\"okienko\" title=\"okienko\"></p>\n<div align=\"center\">\nWpisujemy wybraną przez nas formułę\n</div>\n<p>Moim zdaniem warto nauczyć się prostych wyrażeń regularnych, nawet jeśli nie jest się osobą typowo techniczną. Ułatwi Ci to tworzenie ankiet, choć RegEx wykorzystywane są również w programowaniu czy oprogramowaniu biurowym (np w Excelu). Jeśli chcesz przeczytać więcej, sprawdź wpis bloga -> <a href=\"http://namiekko.pl/2016/12/09/wyrazenia-regularne-dla-nieprogramistow/\" title=\"namiekko.pl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">namiekko.pl</a>.</p>\n<h3 id=\"ankietuj\">Ankietuj!</h3>\n<p>W tym poście opisałam tylko dwa dostępne narzędzia, a jest ich o wiele, wiele więcej. Nie musisz się ograniczać - szukaj, testuj, ankietuj, czytaj, testuj. To najlepszy sposób, by nauczyć się tworzyć świetne ankiety, których wypełnianie będzie przyjemnością. Eksperymentuj z wyglądem - dobry design nie gryzie. A Ty znasz już jakieś inne narzędzia do ankiet? Jakie? Dlaczego akurat te?</p>\n<p>Życzę miłego dnia i dziękuję za przeczytanie :)</p>\n","excerpt":"Jednym z największych grzechów początkujących przedsiębiorców jest wprowadzanie produktów pod wpływem własnej, subiektywnej oceny konkretnego rynku. Pobieżne przejrzenie trendów i analizowanie ich","description":"Krótka notatka o prawie demeter z przykładami","timeToRead":7,"tags":[{"id":"marketing","title":"marketing","path":"/tag/marketing/"}]}},{"node":{"id":"49f29675fadd785b6e00ce47b939d07d","title":" Nowe narzędzie do projektowania i animowania UX?","datetime":"2018-09-07 10:56:24","path":"/nowe-narzedzie-do-projektowania-i-animowania-ux/","cover":"/images/posts/atomic/1.gif","content":"<h4 id=\"w-związku-z-postępem-technologicznym-projektanci-aplikacji-i-stron-internetowych-mają-przed-sobą-coraz-większe-szanse-na-zachwycanie-użytkowników\">W związku z postępem technologicznym projektanci aplikacji i stron internetowych mają przed sobą coraz większe szanse na zachwycanie użytkowników. </h4>\n<p>Karty graficzne i procesory, nawet w urządzeniach mobilnych, są coraz lepsze, dzięki czemu można wykorzystywać ich potencjał tworząc różne animacje i wodotryski. Wielki ocean możliwości odkrywa tez nowe wyzwania dla designerów, którzy muszą sprostać zachciankom coraz bardziej kapryśnych użytkowników. Z pomocą przychodzą odpowiednie narzędzia do designu. W tym poście przedstawię tylko jedno z nich, bo moim zdaniem warto je poznać.  </p>\n<h3 id=\"proszę-państwa-przed-wami-atomicio\">Proszę Państwa, przed Wami <a href=\"http://atomic.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Atomic.io</a>!</h3>\n<p>Jest to prosty, darmowy graficzny edytor interfejsów dla stron WWW czy aplikacji. Pomimo róznorodności aplikacji do projektowania UX, mało z nich posiada opcję darmową bez ograniczenia czasowego. Z reguły większość z nich była na 30 dni, po czym trzeba było przejść na płatny plan. Atomic pozwala na nielimitowaną ilość prototypów, dzięki którym możesz się uczyć i makietować na własny użytek. Kiedy już dojdziesz do wprawy, możesz wykupić płatny plan - pozwoli ci on pracować zespołowo i otrzymać parę dodatkowych funkcji. Co jest przyjemną ciekawostką - możesz skorzystać z darmowego 30 dniowego trialu dla zespołów.  </p>\n<p><img src=\"/images/posts/atomic/2.png\"></p>\n<div align=\"center\"> \nTak wygląda panel projektowania. </div>\n<p>Widoczna po lewej stronie nawigacja jest prosta, bez nadmiaru niepotrzebnych funkcji. Wybierasz ikonę, po czym po prawej stronie pojawia się możliwość konfiguracji obiektu.<br>\nFormat w jakim możemy pobrać swój projekt to jedynie PNG, choć jest też opcja udostępniania interaktywnego interfejsu za pomocą adresu URL - np możesz pochwalić się swoim projektem przyjaciołom i rodzinie, na pewno będą pod wrażeniem (\"huhu, syyynek, ty to te komputery rozumiesz\").  </p>\n<h3 id=\"atomic-działa-na-każdej-platformie\">Atomic działa na każdej platformie!</h3>\n<p>Wszystko za sprawą tego, że jest aplikacją przeglądarkową. Aby zobaczyć i edytować swoje prototypy możesz wejść z jakiegokolwiek urządzenia, ponieważ Twoje prace są przechowywane w chmurze. To sprawia, że nie musisz ciągnąć za sobą PC by wprowadzić drobne poprawki w projekcie, wystarczy notebook. Minusem jest nieprzystosowanie aplikacji dla urządzeń mobilnych, choć nawet jakby było to wątpie by ktokolwiek wytrzymał tworzenie grafiki na tak małym ekranie (z autopsji :| ).</p>\n<h3 id=\"potrzebujesz-dynamicznie-wklejanej-treści-z-pomocą-przychodzą-małe-bazy-danych\">Potrzebujesz dynamicznie wklejanej treści? Z pomocą przychodzą małe bazy danych.</h3>\n<p><img src=\"/images/posts/atomic/3.png\"></p>\n<p>Atomic oferuje darmową możliwość tworzenia prostych zbiorów danych. Możesz je stworzyć arkusz w <a href=\"https://www.google.pl/intl/pl/sheets/about/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google Sheets</a> i zsynchronizować go z Atomic. Są też opcje tworzenia i przetwarzania zmiennych w obiektach. Muszę przyznać, nie używałam zbyt wiele razy tej opcji, więc nie wiem jaki jest jej pełny potencjał. Zachęcam do wypróbowania i podzielenia się w komentarzach.</p>\n<p><img src=\"/images/posts/atomic/4.png\"></p>\n<h3 id=\"skrypty-i-arkusze-stylów\">Skrypty i arkusze stylów</h3>\n<p>Aplikacja standardowo posiada opcję edycji stylów CSS i Javascript/MathJS. Może dla osoby początkującej będzie to czarna magia, ale osoby związane z frontendem będą doskonale wiedziały co z tym można zrobić.  </p>\n<h3 id=\"interaction-hotspot\">Interaction Hotspot</h3>\n<p><img src=\"/images/posts/atomic/5.png\"></p>\n<div align=\"center\"> \nInteraction Hotspot </div>\n<p>Ten niebieski prostokąt to interaction hotspot (punkt do obsługi zdarzeń). Przechwytuje on daną czynność wykonywaną przez użytkownika i wykonuje zadeklarowaną przez Ciebie operację (np przenosi do innej strony lub wykonuje skrypt). Oczywiście z animacją!<br>\n<img src=\"/images/posts/atomic/6.png\"></p>\n<div align=\"center\"> \nRóżne Eventy do wyboru </div>\n<p><img src=\"/images/posts/atomic/7.png\"></p>\n<div align=\"center\"> \nInteraction Hotspot \nOperacje, jakie możesz wykonać po zarejestrowaniu danego zdarzenia</div>\n<h3 id=\"timeline\">Timeline </h3>\n<p>Tak, to program nie tylko do projektowania, a także do animowania swoich interfejsów. Masz do wyboru standardowe animacje lub możesz użyć timeline, tworząc własną customową. Myślę, że znajdziesz coś dla siebie.\n<img src=\"/images/posts/atomic/8.png\"></p>\n<h3 id=\"gotowe-komponenty\">Gotowe komponenty</h3>\n<p>Istnieje cała duża lista gotowych komponentów z Bootstrapa i interfejsu iOS, które możesz importować do własnego prototypu. Nic nie stoi na przeszkodzie, by także stworzyć własne gotowce i je używać. Ułatwia to bardzo pracę i sprawia, że nawet osoby \"bez gustu\" mogą złożyć coś na prawdę ładnego.\n<img src=\"/images/posts/atomic/9.png\"></p>\n<div align=\"center\"> \nGotowe komponenty do wykorzystywania</div>\n<h3 id=\"podsumowanie\">Podsumowanie</h3>\n<p>Oczywiście to <strong>nie wszystkie</strong> funkcje atomic.io. Jest ich o wiele więcej. Mi osobiście <strong>bardzo spodobał</strong> się ten program, szczególnie, że jako użytkownik Linuxa nie mam dostępu do pakietu Adobe. Ubolewam jedynie nad faktem, że domyślne narzędzia nie pozwalają eksportować pliku do formatu GIF. Trzeba używać zewnętrznych programów do snapowania, ale to nie jest skomplikowane.</p>\n<p>Pomimo tego małego makamentu, który może kiedyś będzie zmieniony, jest to świetne oprogramowanie. Szczególnie, że to darmowe narzędzie.<br>\nA Ty jakiej aplikacji używasz? Korzystałeś już z Atomic? Daj znać w komentarzu.  </p>\n<p>Dziękuję za przeczytanie i życzę miłego dnia</p>\n</div>\n","excerpt":"W związku z postępem technologicznym projektanci aplikacji i stron internetowych mają przed sobą coraz większe szanse na zachwycanie użytkowników.  Karty graficzne i procesory, nawet w urządzeniach","description":"Nowe narzędzie do projektowania i animowania UX?","timeToRead":3,"tags":[{"id":"design","title":"design","path":"/tag/design/"}]}}]}}},"context":{}}